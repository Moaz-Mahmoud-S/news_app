import 'package:bloc/bloc.dart';import 'package:flutter/cupertino.dart';import 'package:flutter_bloc/flutter_bloc.dart';import 'package:newsapp/module/business/business_screen.dart';import 'package:newsapp/module/scince/scince_screen.dart';import 'package:newsapp/module/setting/setting_screen.dart';import 'package:newsapp/module/sports/sports_screen.dart';import 'package:newsapp/network/local/cache_helper.dart';import 'package:newsapp/network/remote/dio_helper.dart';import 'package:newsapp/shared/cubit/states.dart';class NewsAppCubit extends Cubit<NewsAppStates> {  int index = 0;  late List<Widget> L1 = [    BusinessScreen(),    ScinceScreen(),    SportsScreen(),    SettingScreen()  ];  List<String> appbar = ["Business", "Science", "Sports", "Setting"];  NewsAppCubit() : super(NewsAppInitialState());  static List<dynamic> business = [];  static List<dynamic> sports = [];  static List<dynamic> science = [];  static NewsAppCubit getobject(BuildContext context) =>      BlocProvider.of(context);  void NewsAppinitial() {    emit(NewsAppInitialState());  }  void AppBarState(int currentindex) {    index = currentindex;    if (index == 0) getBusiness();    if (index == 1)      getscience();    else if (index == 2) getsports();    emit(NewsAppBottomNavState());  }  void getBusiness() {    emit(NewsloadingState());    if (business.length > 0) {      emit(NewsgetbusinesssucessState());    } else {      DioHelper.getdata('v2/top-headlines', {        'country': 'eg',        'category': 'business',        'apikey': '6fa5f51264b04fc38382f0a7fc17ec2d',      }).then((value) {        business = value.data["articles"];        print(business.length);        emit(NewsgetbusinesssucessState());      }).catchError((error) {        // print(error.toSrting());        emit(NewsgetbusinessfailedState(error.toString()));      });    }  }  void getsports() {    if (sports.length > 0) {      emit(NewsgetsportsucessState());    } else {      emit(NewsloadingState());      DioHelper.getdata('v2/top-headlines', {        'country': 'eg',        'category': 'sports',        'apikey': '6fa5f51264b04fc38382f0a7fc17ec2d',      }).then((value) {        sports = value.data["articles"];        print(sports.length);        emit(NewsgetsportsucessState());      }).catchError((error) {        // print(error.toSrting());        emit(NewsgetsportfailedState(error.toString()));      });    }  }  void getscience() {    if (science.length > 0) {      emit(NewsgetsceincesucessState());    } else {      emit(NewsloadingState());      DioHelper.getdata(          'v2/top-headlines', {        'country': 'eg',        'category': 'science',        'apikey': '6fa5f51264b04fc38382f0a7fc17ec2d',      }).then((value) {        science = value.data["articles"];        print(science.length);        emit(NewsgetsceincesucessState());      }).catchError((error) {        //   print(error.toSrting());        emit(NewsgetsceincefailedState(error.toString()));      });    }  }  bool isDark = false;  void changemode({bool? fromshared}) {    if (fromshared!=null)      {        isDark=fromshared;        emit(NewsAppModeChange());      }      else        {          isDark = !isDark;          CacheHelper.putdata("isDark", isDark).then((value) {            emit(NewsAppModeChange());            print(isDark);          }          );}    } static List<dynamic> search = [];   void Search(String value) {    search = [];    emit(NewsloadingSearchState());    DioHelper.getdata(        'v2/everything', {      'q': '$value',      'apikey': '6fa5f51264b04fc38382f0a7fc17ec2d',    }).then((value) {      search = value.data["articles"];      print(search.length);      emit(NewsgetsearchsucessState());    }).catchError((error) {      //   print(error.toSrting());      emit(NewsgetsearchfailedState(error.toString()));    });  }  void assignvalue (TextEditingController t1,String value)  {      t1.text=value;      emit(NewsAppSearchState());  }}